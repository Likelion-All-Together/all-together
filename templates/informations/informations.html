{% extends 'base.html' %}
{% load static %}
{% block title %}정보{% endblock %}
{% block content %}

<head>
    <link rel="stylesheet" href="{% static 'css/screens/informations.css' %}">
    <!-- 최신순/스크랩순 정렬 jquery-->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#align_mode").change(function () {
                var selectedMode = $(this).val(); // 선택된 모드 값 가져오기
                var currentTab = "{{ request.GET.tab }}"; // 현재 선택된 탭
                var url = "{% url 'informations:information' %}?tab=" + currentTab + "&align_mode=" + selectedMode;
                window.location.href = url; // 페이지 이동
            });
            var tab = "{{ request.GET.tab }}";  // Django 템플릿 태그로 파라미터 값 가져오기
            var align_mode = "{{ request.GET.align_mode }}";  // Django 템플릿 태그로 파라미터 값 가져오기
            if(align_mode === 'recently') { $("#align_mode option[value='recently']").prop("selected", true); }
            else if (align_mode === 'scrap') { $("#align_mode option[value='scrap']").prop("selected", true); } 
            else { $("#align_mode option[value='recently']").prop("selected", true); }
        });
    </script>
    <style>
        .number-nav {
            width: 20%;
        }
    </style>
</head>

<body id="info-body">
    {% comment %} <script src="/static/js/header.js"></script> {% endcomment %}
    {% comment %} <div class="info-title">
        <div>
            <h1>000지역 / 000복지</h1>
            <p>000지역 000복지에 관한 설명 000복지에는 무엇이 들어가면 좋을까요<br>
                대상도 나눠서 볼 수 있거나 자신한테 맞는 복지를 검색을 통해 찾는 기능이 추가
                된다면 더욱 좋을 것 같습니다.
            </p>
        </div>
        
    </div> {% endcomment %}

    <main class="info-main">
        <div class="info-main-content">
            <div class="info-main-content__top">
                <nav class="info-main-content__nav">
                    <ul>
                        {% if tab == 'region'%}
                            <li class="info-main-content__li"><a href="{% url 'informations:information' %}?tab=region&align_mode=recently&page=1" style="font-size: 20px;">복지제도</a></li>
                            <li class="info-main-content__li"><a href="{% url 'informations:information' %}?tab=multicultural&align_mode=recently&page=1" style="color: #977F6A;">다문화 일자리 정보</a></li>
                            <li class="info-main-content__li"><a href="{% url 'informations:information' %}?tab=afterschool&align_mode=recently&page=1" style="color: #977F6A;">방과후 & 교육</a></li>
                        {% elif tab == 'multicultural'%}
                            <li class="info-main-content__li"><a href="{% url 'informations:information' %}?tab=region&align_mode=recently&page=1" style="color: #977F6A;">복지제도</a></li>
                            <li class="info-main-content__li"><a href="{% url 'informations:information' %}?tab=multicultural&align_mode=recently&page=1" style="font-size: 20px;">다문화 일자리 정보</a></li>
                            <li class="info-main-content__li"><a href="{% url 'informations:information' %}?tab=afterschool&align_mode=recently&page=1" style="color: #977F6A;">방과후 & 교육</a></li>
                        {% elif tab == 'afterschool'%}
                            <li class="info-main-content__li"><a href="{% url 'informations:information' %}?tab=region&align_mode=recently&page=1" style="color: #977F6A;">복지제도</a></li>
                            <li class="info-main-content__li"><a href="{% url 'informations:information' %}?tab=multicultural&align_mode=recently&page=1" style="color: #977F6A;">다문화 일자리 정보</a></li>
                            <li class="info-main-content__li"><a href="{% url 'informations:information' %}?tab=afterschool&align_mode=recently&page=1" style="font-size: 20px;">방과후 & 교육</a></li>
                        {% endif%}
                    </ul>
                </nav>
                <form action="{% url 'informations:information' %}" method="GET" id="align_mode_form" class="align_mode_form">
                    <select name="align_mode" id="align_mode" class="align_mode-info">
                        <option value="recently">최신순</option>
                        <option value="scrap">인기순</option>
                    </select>
                </form>
            </div>
            {% if tab == 'region'%}
            <div class="item-container" id="item-container">
                <div class="item-container__column">
                    {% for item in first_obj %}
                    <div class="item">
                        <div class="item__ct">{{ item.tag1 }}</div>
                        <div class="item__ct">{{ item.tag2 }}</div>
                        <img class="item__star" src="{% static 'image/empty_scrap.png' %}">
                        <div class="item__topic">{{ item.title }}</div>
                        <div class="item__description">
                            <div>
                                {{ item.content }}
                            </div>
                        </div>
                        <table class="item__table">
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">문의처</td>
                                <td class="item__table-ctgory-data">{{ item.phone }}</td>
                            </tr>
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">지원주기</td>
                                <td class="item__table-ctgory-data">{{ item.support_cycle }}</td>
                            </tr>
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">제공유형</td>
                                <td class="item__table-ctgory-data">{{ item.type }}</td>
                            </tr>
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">담당부처</td>
                                <td class="item__table-ctgory-data">{{ item.department }}</td>
                            </tr>
                        </table>
                        <button id="scrap-btn-{{ item.id }}" class="item__more-btn" onclick="item_scrap({{ item.id }})">
                            <a href="{{ item.url }}">자세히 보기</a>
                            {% if request.user in item.scrap.all %}
                                <!-- 로그인 한 유저가 좋아요를 누른 유저일때  -->
                                <i id="heart-{{ item.id }}" class="fas fa-heart"></i>
                            {% else %}
                                <!-- 로그인 한 유저가 좋아요를 누른 유저가 아닐 때  -->
                                <i id="heart-{{ item.id }}" class="far fa-heart"></i>
                            {% endif %}
                            <span class="scrap-count" id="scrap_count-{{ item.id }}">{{ item.scrap.count }}</span>
                        </button>
                    </div>
                    {% endfor %}
                </div>
                <div class="item-container__column">
                    {% for item in second_obj %}
                    <div class="item">
                        <div class="item__ct">{{ item.tag1 }}</div>
                        <div class="item__ct">{{ item.tag2 }}</div>
                        <img class="item__star" src="{% static 'image/empty_scrap.png' %}">
                        <div class="item__topic">{{ item.title }}</div>
                        <div class="item__description">
                            <div>
                                {{ item.content }}
                            </div>
                        </div>
                        <table class="item__table">
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">문의처</td>
                                <td class="item__table-ctgory-data">{{ item.phone }}</td>
                            </tr>
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">지원주기</td>
                                <td class="item__table-ctgory-data">{{ item.support_cycle }}</td>
                            </tr>
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">제공유형</td>
                                <td class="item__table-ctgory-data">{{ item.type }}</td>
                            </tr>
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">담당부처</td>
                                <td class="item__table-ctgory-data">{{ item.department }}</td>
                            </tr>
                        </table>
                        <button id="scrap-btn-{{ item.id }}" class="item__more-btn" onclick="item_scrap({{ item.id }})">
                            <a href="{{ item.url }}">자세히 보기</a>
                            {% if request.user in item.scrap.all %}
                                <!-- 로그인 한 유저가 좋아요를 누른 유저일때  -->
                                <i id="heart-{{ item.id }}" class="fas fa-heart"></i>
                            {% else %}
                                <!-- 로그인 한 유저가 좋아요를 누른 유저가 아닐 때  -->
                                <i id="heart-{{ item.id }}" class="far fa-heart"></i>
                            {% endif %}
                            <span class="scrap-count" id="scrap_count-{{ item.id }}">{{ item.scrap.count }}</span>
                        </button>
                    </div>
                    {% endfor %}
                </div>
                <div class="item-container__column">
                    {% for item in third_obj %}
                    <div class="item">
                        <div class="item__ct">{{ item.tag1 }}</div>
                        <div class="item__ct">{{ item.tag2 }}</div>
                        <img class="item__star" src="{% static 'image/empty_scrap.png' %}">
                        <div class="item__topic">{{ item.title }}</div>
                        <div class="item__description">
                            <div>
                                {{ item.content }}
                            </div>
                        </div>
                        <table class="item__table">
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">문의처</td>
                                <td class="item__table-ctgory-data">{{ item.phone }}</td>
                            </tr>
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">지원주기</td>
                                <td class="item__table-ctgory-data">{{ item.support_cycle }}</td>
                            </tr>
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">제공유형</td>
                                <td class="item__table-ctgory-data">{{ item.type }}</td>
                            </tr>
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">담당부처</td>
                                <td class="item__table-ctgory-data">{{ item.department }}</td>
                            </tr>
                        </table>
                        <button id="scrap-btn-{{ item.id }}" class="item__more-btn" onclick="item_scrap({{ item.id }})">
                            <a href="{{ item.url }}">자세히 보기</a>
                            {% if request.user in item.scrap.all %}
                                <!-- 로그인 한 유저가 좋아요를 누른 유저일때  -->
                                <i id="heart-{{ item.id }}" class="fas fa-heart"></i>
                            {% else %}
                                <!-- 로그인 한 유저가 좋아요를 누른 유저가 아닐 때  -->
                                <i id="heart-{{ item.id }}" class="far fa-heart"></i>
                            {% endif %}
                            <span class="scrap-count" id="scrap_count-{{ item.id }}">{{ item.scrap.count }}</span>
                        </button>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% elif tab == 'multicultural'%}
            <div class="item-container" id="item-container">
                <div class="item-container__column">
                    {% for item in first_obj %}
                    <div class="item">
                        <div class="item__ct">{{ item.tag1 }}</div>
                        <div class="item__ct">{{ item.tag2 }}</div>
                        <img class="item__star" src="{% static 'image/empty_scrap.png' %}">
                        <div class="item__topic">{{ item.title }}</div>
                        <div class="item__description">
                            <div>
                                {{ item.content }}
                            </div>
                        </div>
                        <table class="item__table">
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">문의처</td>
                                <td class="item__table-ctgory-data">{{ item.phone }}</td>
                            </tr>
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">지원주기</td>
                                <td class="item__table-ctgory-data">{{ item.support_cycle }}</td>
                            </tr>
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">제공유형</td>
                                <td class="item__table-ctgory-data">{{ item.type }}</td>
                            </tr>
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">담당부처</td>
                                <td class="item__table-ctgory-data">{{ item.department }}</td>
                            </tr>
                        </table>
                        <button id="scrap-btn-{{ item.id }}" class="item__more-btn" onclick="item_scrap({{ item.id }})">
                            <a href="{{ item.url }}">자세히 보기</a>
                            {% if request.user in item.scrap.all %}
                                <!-- 로그인 한 유저가 좋아요를 누른 유저일때  -->
                                <i id="heart-{{ item.id }}" class="fas fa-heart"></i>
                            {% else %}
                                <!-- 로그인 한 유저가 좋아요를 누른 유저가 아닐 때  -->
                                <i id="heart-{{ item.id }}" class="far fa-heart"></i>
                            {% endif %}
                            <span class="scrap-count" id="scrap_count-{{ item.id }}">{{ item.scrap.count }}</span>
                        </button>
                    </div>
                    {% endfor %}
                </div>
                <div class="item-container__column">
                    {% for item in second_obj %}
                    <div class="item">
                        <div class="item__ct">{{ item.tag1 }}</div>
                        <div class="item__ct">{{ item.tag2 }}</div>
                        <img class="item__star" src="{% static 'image/empty_scrap.png' %}">
                        <div class="item__topic">{{ item.title }}</div>
                        <div class="item__description">
                            <div>
                                {{ item.content }}
                            </div>
                        </div>
                        <table class="item__table">
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">문의처</td>
                                <td class="item__table-ctgory-data">{{ item.phone }}</td>
                            </tr>
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">지원주기</td>
                                <td class="item__table-ctgory-data">{{ item.support_cycle }}</td>
                            </tr>
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">제공유형</td>
                                <td class="item__table-ctgory-data">{{ item.type }}</td>
                            </tr>
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">담당부처</td>
                                <td class="item__table-ctgory-data">{{ item.department }}</td>
                            </tr>
                        </table>
                        <button id="scrap-btn-{{ item.id }}" class="item__more-btn" onclick="item_scrap({{ item.id }})">
                            <a href="{{ item.url }}">자세히 보기</a>
                            {% if request.user in item.scrap.all %}
                                <!-- 로그인 한 유저가 좋아요를 누른 유저일때  -->
                                <i id="heart-{{ item.id }}" class="fas fa-heart"></i>
                            {% else %}
                                <!-- 로그인 한 유저가 좋아요를 누른 유저가 아닐 때  -->
                                <i id="heart-{{ item.id }}" class="far fa-heart"></i>
                            {% endif %}
                            <span class="scrap-count" id="scrap_count-{{ item.id }}">{{ item.scrap.count }}</span>
                        </button>
                    </div>
                    {% endfor %}
                </div>
                <div class="item-container__column">
                    {% for item in third_obj %}
                    <div class="item">
                        <div class="item__ct">{{ item.tag1 }}</div>
                        <div class="item__ct">{{ item.tag2 }}</div>
                        <img class="item__star" src="{% static 'image/empty_scrap.png' %}">
                        <div class="item__topic">{{ item.title }}</div>
                        <div class="item__description">
                            <div>
                                {{ item.content }}
                            </div>
                        </div>
                        <table class="item__table">
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">문의처</td>
                                <td class="item__table-ctgory-data">{{ item.phone }}</td>
                            </tr>
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">지원주기</td>
                                <td class="item__table-ctgory-data">{{ item.support_cycle }}</td>
                            </tr>
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">제공유형</td>
                                <td class="item__table-ctgory-data">{{ item.type }}</td>
                            </tr>
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">담당부처</td>
                                <td class="item__table-ctgory-data">{{ item.department }}</td>
                            </tr>
                        </table>
                        <button id="scrap-btn-{{ item.id }}" class="item__more-btn" onclick="item_scrap({{ item.id }})">
                            <a href="{{ item.url }}">자세히 보기</a>
                            {% if request.user in item.scrap.all %}
                                <!-- 로그인 한 유저가 좋아요를 누른 유저일때  -->
                                <i id="heart-{{ item.id }}" class="fas fa-heart"></i>
                            {% else %}
                                <!-- 로그인 한 유저가 좋아요를 누른 유저가 아닐 때  -->
                                <i id="heart-{{ item.id }}" class="far fa-heart"></i>
                            {% endif %}
                            <span class="scrap-count" id="scrap_count-{{ item.id }}">{{ item.scrap.count }}</span>
                        </button>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% elif tab == 'afterschool'%}
            <div class="item-container" id="item-container">
                <div class="item-container__column">
                    {% for item in first_obj %}
                    <div class="item">
                        <div class="item__ct">{{ item.tag1 }}</div>
                        <div class="item__ct">{{ item.tag2 }}</div>
                        <img class="item__star" src="{% static 'image/empty_scrap.png' %}">
                        <div class="item__topic">{{ item.title }}</div>
                        <div class="item__description">
                            <div>
                                {{ item.region }}동 | 
                            </div>
                        </div>
                        <table class="item__table">
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">접수일시</td>
                                <td class="item__table-ctgory-data">{{ item.receipt_start|date:"m월 d일" }} ~ {{ item.receipt_end|date:"m월 d일" }}</td>
                            </tr>
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">교육일시</td>
                                <td class="item__table-ctgory-data">{{ item.training_start|date:"m월 d일" }} ~ {{ item.training_end|date:"m월 d일" }}</td>
                            </tr>
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">수강료</td>
                                <td class="item__table-ctgory-data">{{ item.tuition }}(원)</td>
                            </tr>
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">상태</td>
                                <td class="item__table-ctgory-data">{{ item.status }}</td>
                            </tr>
                        </table>
                        <button id="scrap-btn-{{ item.id }}" class="item__more-btn" onclick="item_scrap({{ item.id }})">
                            <a href="{{ item.url }}">자세히 보기</a>
                            {% if request.user in item.scrap.all %}
                                <!-- 로그인 한 유저가 좋아요를 누른 유저일때  -->
                                <i id="heart-{{ item.id }}" class="fas fa-heart"></i>
                            {% else %}
                                <!-- 로그인 한 유저가 좋아요를 누른 유저가 아닐 때  -->
                                <i id="heart-{{ item.id }}" class="far fa-heart"></i>
                            {% endif %}
                            <span class="scrap-count" id="scrap_count-{{ item.id }}">{{ item.scrap.count }}</span>
                        </button>
                    </div>
                    {% endfor %}
                </div>
                <div class="item-container__column">
                    {% for item in second_obj %}
                    <div class="item">
                        <div class="item__ct">{{ item.tag1 }}</div>
                        <div class="item__ct">{{ item.tag2 }}</div>
                        <img class="item__star" src="{% static 'image/empty_scrap.png' %}">
                        <div class="item__topic">{{ item.title }}</div>
                        <div class="item__description">
                            <div>
                                {{ item.region }}동 | 
                            </div>
                        </div>
                        <table class="item__table">
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">접수일시</td>
                                <td class="item__table-ctgory-data">{{ item.receipt_start|date:"m월 d일" }} ~ {{ item.receipt_end|date:"m월 d일" }}</td>
                            </tr>
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">교육일시</td>
                                <td class="item__table-ctgory-data">{{ item.training_start|date:"m월 d일" }} ~ {{ item.training_end|date:"m월 d일" }}</td>
                            </tr>
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">수강료</td>
                                <td class="item__table-ctgory-data">{{ item.tuition }}(원)</td>
                            </tr>
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">상태</td>
                                <td class="item__table-ctgory-data">{{ item.status }}</td>
                            </tr>
                        </table>
                        <button id="scrap-btn-{{ item.id }}" class="item__more-btn" onclick="item_scrap({{ item.id }})">
                            <a href="{{ item.url }}">자세히 보기</a>
                            {% if request.user in item.scrap.all %}
                                <!-- 로그인 한 유저가 좋아요를 누른 유저일때  -->
                                <i id="heart-{{ item.id }}" class="fas fa-heart"></i>
                            {% else %}
                                <!-- 로그인 한 유저가 좋아요를 누른 유저가 아닐 때  -->
                                <i id="heart-{{ item.id }}" class="far fa-heart"></i>
                            {% endif %}
                            <span class="scrap-count" id="scrap_count-{{ item.id }}">{{ item.scrap.count }}</span>
                        </button>
                    </div>
                    {% endfor %}
                </div>
                <div class="item-container__column">
                    {% for item in third_obj %}
                    <div class="item">
                        <div class="item__ct">{{ item.tag1 }}</div>
                        <div class="item__ct">{{ item.tag2 }}</div>
                        <img class="item__star" src="{% static 'image/empty_scrap.png' %}">
                        <div class="item__topic">{{ item.title }}</div>
                        <div class="item__description">
                            <div>
                                {{ item.region }}동 | 
                            </div>
                        </div>
                        <table class="item__table">
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">접수일시</td>
                                <td class="item__table-ctgory-data">{{ item.receipt_start|date:"m월 d일" }} ~ {{ item.receipt_end|date:"m월 d일" }}</td>
                            </tr>
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">교육일시</td>
                                <td class="item__table-ctgory-data">{{ item.training_start|date:"m월 d일" }} ~ {{ item.training_end|date:"m월 d일" }}</td>
                            </tr>
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">수강료</td>
                                <td class="item__table-ctgory-data">{{ item.tuition }}(원)</td>
                            </tr>
                            <tr class="item__table-tr">
                                <td class="item__table-ctgory">상태</td>
                                <td class="item__table-ctgory-data">{{ item.status }}</td>
                            </tr>
                        </table>
                        <button id="scrap-btn-{{ item.id }}" class="item__more-btn" onclick="item_scrap({{ item.id }})">
                            <a href="{{ item.url }}">자세히 보기</a>
                            {% if request.user in item.scrap.all %}
                                <!-- 로그인 한 유저가 좋아요를 누른 유저일때  -->
                                <i id="heart-{{ item.id }}" class="fas fa-heart"></i>
                            {% else %}
                                <!-- 로그인 한 유저가 좋아요를 누른 유저가 아닐 때  -->
                                <i id="heart-{{ item.id }}" class="far fa-heart"></i>
                            {% endif %}
                            <span class="scrap-count" id="scrap_count-{{ item.id }}">{{ item.scrap.count }}</span>
                        </button>
                    </div>
                    {% endfor %}
                </div>
            </div>

            {% endif %}
            
            <div class="information-footer">
                {% if page_obj.has_other_pages %}
                    <ul class="number-nav">
                        {% if page_obj.has_previous %}
                            <li class="number-nav__list"><a href="?tab={{tab}}&align_mode={{align_mode}}&page={{page_obj.previous_page_number}}"><img id="left-btn" src="{% static 'image/left-btn.svg' %}"></a></li>
                        {% endif %}

                        {% for page in paginator.page_range %}
                            {% if page == page_obj.number %}
                                <li class="number-nav__list"><a href="?tab={{tab}}&align_mode={{align_mode}}&page={{page}}">{{ page }}</a></li>
                            {% else %}
                                <li class="number-nav__list" style="color:#977F6A;" ><a href="?tab={{tab}}&align_mode={{align_mode}}&page={{page}}">{{ page }}</a></li>
                            {% endif %}
                        {% endfor %}

                        {% if page_obj.has_next %}
                            <li class="number-nav__list"><a href="?tab={{tab}}&align_mode={{align_mode}}&page={{page_obj.next_page_number}}"><img id="right-btn" src="{% static 'image/left-btn.svg' %}"></a></li>
                        {% endif %}
                    </ul>
                {% endif%}
            </div>
        </div>
    </main>

</body>

{% comment %} 스크랩 기능 {% endcomment %}
<script src="https://code.jquery.com/jquery-3.5.1.js"
        integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
<script type="text/javascript">
    function item_scrap(id) {
        var currentTab = "{{ request.GET.tab }}"; // 현재 선택된 탭
        console.log(currentTab)
        $.ajax({
            url: "{%url 'informations:scrap'%}",
            type: "GET",
            headers: {
                "X-Requested-With": "XMLHttpRequest",
            },
            data: {
                'item_id': id,
                'item_name': currentTab,
            },
            dataType: "json",
            success: function (response) { 
                
                // 해당 항목의 좋아요 수만 업데이트
                $('#scrap_count-' + id).html(response.scrap_count);
                
                // 좋아요 버튼 아이콘 변경
                var heartIcon = $('#heart-' + id);
                if (response.message === "좋아요") {
                    heartIcon.removeClass("far fa-heart").addClass("fas fa-heart");
                } else if (response.message === "좋아요 취소") {
                    heartIcon.removeClass("fas fa-heart").addClass("far fa-heart");
                }
                
                // 좋아요 수에 따라 항목을 정렬 (jQuery 이용)
                var itemContainer = $('#item-container');  // 항목을 감싸는 컨테이너의 ID
                var alignMode = $('#align_mode').val(); // 선택된 정렬 모드 가져오기
    
                if (alignMode === 'scrap') {
                    var items = itemContainer.children('.item');  // 항목들을 선택
        
                    items.sort(function(a, b) {
                        var aScrapCount = parseInt($(a).find('.scrap-count').text());
                        var bScrapCount = parseInt($(b).find('.scrap-count').text());
                        return bScrapCount - aScrapCount;  // 스크랩 수에 따라 내림차순 정렬
                    });
                    
                    itemContainer.html(items);  // 정렬된 항목을 컨테이너에 적용
                }
            }
        });
    }
</script>

{% endblock %}